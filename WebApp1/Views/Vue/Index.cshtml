
<div id="app" class="row">
    <h2>Vue</h2>
    <table class="table">
        <tr>
            <th>
                Avatar
            </th>
            <th>
                Username
            </th>
            <th>
                First Name
            </th>
            <th>
                Last Name
            </th>
            <th>
                Address
            </th>
            <th>
                Birthday
            </th>
            <th></th>
        </tr>

        <tr v-for="item in list">
            <td>
                @*<img src="@Url.Content("~/Images/placeholder.jpg")" alt="Alternate Text" width="80" height="80" />*@
                <img v-if="item.pic === null" src="@Url.Content("~/Images/placeholder.jpg")" />
                <img v-else :src="item.pic" width="80" height="80" />
            </td>
            <td>{{ item.username }}</td>
            <td>{{ item.fname }}</td>
            <td>{{ item.lname }}</td>
            <td>{{ item.address }}</td>
            <td>{{ item.dob }}</td>
        </tr>

    </table>
</div>

@section scripts{
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <script>
        var url = '@Url.RouteUrl("Default")';
        var app = new Vue({
            el: "#app",
            data: {
                msg: "Welcome to Vue.js!",
                list: [],
                url: this.url
            },
            created: function() {
                axios.get(url + '/GetUsers')
                    .then((response) => {
                        //console.log(response.data);
                        response.data.forEach((item, index) => {
                            response.data[index].pic = item.pic.replace("~",'../..');
                            //console.log(response.data);
                        });
                        app.list = response.data;
                    })
                    .catch((error) => {
                        console.log(error);
                    })
            }
        });
    </script>
}
